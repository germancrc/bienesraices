{{!-- propiedad_detalles.hbs --}}
<section id="propiedad-detalles" class="property-details py-3 py-lg-4">
    <div class="container">
        <!-- Encabezado -->
        <div class="d-flex flex-column flex-md-row justify-content-between align-items-start mb-3 mb-md-4">
            <div class="mb-2 mb-md-0">
                <span class="badge badge-{{property.type.class}} py-1 py-md-2 mb-1">
                    <i class="{{property.type.icon}} me-1"></i>
                    {{property.type.text}}
                </span>
                <h1 class="property-title h2 mb-1 mb-md-2">{{property.title.text}}</h1>
                <p class="text-muted mb-0">
                    <i class="{{property.location.icon}} text-primary"></i>
                    {{property.location.text}}
                </p>
            </div>
            {{#if property.badge}}
            <span class="badge badge-{{property.badge.type}} py-1 py-md-2 align-self-start align-self-md-center">
                <i class="{{property.badge.icon}} me-1"></i>
                {{property.badge.text}}
            </span>
            {{/if}}
        </div>

        <div class="row">
            <!-- Galería de Imágenes -->
            <div class="col-lg-7 mb-4">
                <div class="card border-0 shadow-sm">
                    <!-- Imagen principal -->
                    <a href="{{property.images.[0]}}" data-lightbox="property-gallery" data-title="{{property.title.text}}">
                        <img src="{{property.images.[0]}}" class="card-img-top rounded-top w-100" alt="{{property.alt}}"
                            style="height: 300px; height-md: 400px; object-fit: cover;">
                    </a>

                    <!-- Miniaturas -->
                    <div class="row g-1 g-md-2 p-2 p-md-3">
                        {{#each property.images}}
                        {{#if @index}}
                        <div class="col-4 col-sm-3">
                            <a href="{{this}}" data-lightbox="property-gallery" data-title="{{../property.title.text}}">
                                <img src="{{this}}" class="img-thumbnail w-100"
                                    alt="Vista {{@index}} de {{../property.title.text}}"
                                    style="height: 80px; height-md: 100px; object-fit: cover;">
                            </a>
                        </div>
                        {{/if}}
                        {{/each}}
                    </div>
                </div>

                <!-- Características -->
                <div class="card border-0 shadow-sm mt-3 mt-md-4">
                    <div class="card-body p-3 p-md-4">
                        <h4 class="h5 card-title mb-3 mb-md-4">
                            <i class="bi bi-list-check me-2"></i>Características
                        </h4>

                        <div class="row">
                            <div class="col-md-6">
                                <ul class="list-unstyled">
                                    {{#each property.details}}
                                    <li class="mb-1 mb-md-2">
                                        <i class="{{this.icon}} text-primary me-2"></i>
                                        <strong>{{this.text}}</strong>
                                    </li>
                                    {{/each}}
                                    <li class="mb-1 mb-md-2">
                                        <i class="bi bi-calendar text-primary me-2"></i>
                                        <strong>Año:</strong> {{property.features.constructionYear}}
                                    </li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <ul class="list-unstyled">
                                    <li class="mb-1 mb-md-2">
                                        <i class="bi bi-compass text-primary me-2"></i>
                                        <strong>Orientación:</strong> {{property.features.orientation}}
                                    </li>
                                    <li class="mb-1 mb-md-2">
                                        <i class="bi bi-check-circle text-primary me-2"></i>
                                        <strong>Estado:</strong> {{property.features.condition}}
                                    </li>
                                    <li class="mb-1 mb-md-2">
                                        <i class="bi bi-car-front text-primary me-2"></i>
                                        <strong>Garaje:</strong> {{property.features.garage.spaces}} ({{property.features.garage.type}})
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Amenidades -->
                <div class="card border-0 shadow-sm mt-3 mt-md-4">
                    <div class="card-body p-3 p-md-4">
                        <h4 class="h5 card-title mb-3 mb-md-4">
                            <i class="bi bi-star-fill me-2"></i>Amenidades
                        </h4>
                        <div class="row">
                            {{#each property.amenities}}
                            <div class="col-6 col-md-4 mb-1 mb-md-2">
                                <div class="d-flex align-items-center">
                                    <i class="bi bi-check-circle-fill text-success me-1 me-md-2"></i>
                                    <span class="small">{{this}}</span>
                                </div>
                            </div>
                            {{/each}}
                        </div>
                    </div>
                </div>

                <!-- Descripción -->
                <div class="card border-0 shadow-sm mt-3 mt-md-4">
                    <div class="card-body p-3 p-md-4">
                        <h4 class="h5 card-title mb-3 mb-md-4">
                            <i class="bi bi-file-text me-2"></i>Descripción
                        </h4>
                        <p class="card-text small">{{property.description}}</p>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="col-lg-5">
                <div class="sticky-lg-top" style="top: 20px;">
                    <!-- Precio y contacto -->
                    <div class="card border-0 shadow-sm mb-3 mb-md-4">
                        <div class="card-body p-3 p-md-4">
                            <div class="d-flex justify-content-between align-items-center mb-2 mb-md-3">
                                <span class="badge badge-{{property.option.class}} py-1 py-md-2">
                                    <i class="{{property.option.icon}} me-1"></i>
                                    {{property.option.text}}
                                </span>
                                <h3 class="h4 text-primary mb-0">{{property.price}}</h3>
                            </div>

                            <button class="btn btn-primary text-light w-100 py-2 mb-2">
                                <i class="bi bi-whatsapp me-1 me-md-2"></i> WhatsApp
                            </button>
                            <button class="btn btn-outline-secondary w-100 py-2">
                                <i class="bi bi-telephone me-1 me-md-2"></i> Llamar
                            </button>
                        </div>
                    </div>

                    <!-- Mapa -->
                    <div class="card border-0 shadow-sm mb-3 mb-md-4">
                        <div class="card-body p-3 p-md-4">
                            <h4 class="h5 card-title mb-2 mb-md-3">
                                <i class="bi bi-geo-alt-fill me-2"></i>Ubicación
                            </h4>
                            <div class="ratio ratio-16x9 rounded">
                                <iframe
                                    src="https://www.google.com/maps?q={{property.coordinates.[0]}},{{property.coordinates.[1]}}&hl=es&z=15&output=embed"
                                    allowfullscreen aria-hidden="false" tabindex="0">
                                </iframe>
                            </div>
                            <p class="mt-2 mb-0 small text-muted">
                                <i class="bi bi-info-circle me-1"></i>
                                {{property.location.zone}}
                            </p>
                        </div>
                    </div>

                    <!-- Formulario -->
                    <div class="card border-0 shadow-sm">
                        <div class="card-body p-3 p-md-4">
                            <h4 class="h5 card-title mb-2 mb-md-3">
                                <i class="bi bi-envelope me-2"></i>Contacto
                            </h4>
                            <form>
                                <div class="mb-2 mb-md-3">
                                    <input type="text" class="form-control form-control-sm" placeholder="Nombre" required>
                                </div>
                                <div class="mb-2 mb-md-3">
                                    <input type="email" class="form-control form-control-sm" placeholder="Email" required>
                                </div>
                                <div class="mb-2 mb-md-3">
                                    <input type="tel" class="form-control form-control-sm" placeholder="Teléfono">
                                </div>
                                <div class="mb-2 mb-md-3">
                                    <textarea class="form-control form-control-sm" rows="2" placeholder="Mensaje"></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary text-light w-100 py-2">Enviar</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>